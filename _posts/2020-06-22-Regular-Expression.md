![loading](../../images/reg-exp.jpeg)

>A regular expression is an object that describes a pattern of characters.Regular expressions are used to perform pattern-matching and "search-and-replace" functions on text.

+ [语法文档](https://www.runoob.com/regexp/regexp-syntax.html)
+ [线上测试](https://regex101.com/)

## 目录

- [常用匹配](#常用匹配)
  - [php实现](#PHP正则实现)
- [贪婪和非贪婪](#贪婪和非贪婪)
- [正则表达式的运算符优先级](#正则表达式的运算符优先级)
- [正则表达式的常用模式](#正则表达式的常用模式)
- [正则表达式的使用注意事项](#正则表达式的使用注意事项)
- [常用正则表达式](#常用正则表达式)

## 常用匹配

* * *

| **匹配** | **公式** 
| --- | --- 
| 中文 | [\u4e00-\u9fa5] 
| 匹配双字节字符(包括汉字在内) | [^\x00-\xff]

* * *  

### PHP正则实现  

```php
public function emailRegexTest ($email) {
    $pattern = "/^([\w]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/i";
    if(preg_match($pattern, $email)) {
        return true;
    }else{
        return false;
    }
}

public function groupRegexTest ($string) {
    if(preg_match("/^(?'group1'[\w]+)-(?'group2'[\w]+)$/", $string,$matchs) > 0) {
        return $matchs;
    }else{
        return null;
    }
}
```
## 贪婪和非贪婪  
+ 贪婪/非贪婪匹配模式  
_贪婪_：当正则表达式中包含能接受重复的限定符时，匹配尽可能多的字符（**默认**）  
_非贪婪_：当正则表达式中包含能接受重复的限定符时，匹配尽可能少的字符，只需在重复的限定符后面加上 **?**

* * *

| **非贪婪限定符代码/语法** | **描述** 
| --- | --- 
| *? | 重复0次或更多次，但尽可能的少重复
| +? | 重复一次或更多次，但尽可能的少重复
| ?? | 重复0次或一次，但尽可能的少重复
| {n,}? | 重复n次或更多次，但尽可能的少重复
| {n,m}? | 重复n到m次，但尽可能的少重复

* * *

举例： *aa\<div>test1\</div>bb\<div>test2\</div>cc*  
1. 正则表达式：\<div>.*\</div>  
>     <div>test1</div>bb<div>test2</div>  
2. 正则表达式：\<div>.*?\</div> 
>     <div>test1</div>  

## 正则表达式的运算符优先级  
>转义符->括号和中括号->限定符->定位点和序列（字符）->替换  

## 正则表达式的常用模式  
+ 忽略大小写（i）
+ 多行模式（m）
+ 点号通配模式（s）:点号通配换行符
+ 懒惰模式（U）:相当于前面的?
+ 结尾模式（D）:匹配时限定$匹配出来的不可有换行
+ 支持UTF-8转义表达（u）:使表达式支持UTF-8  

## 正则表达式的使用注意事项
1. 使用字符组代替分支条件  
2. 优先选择最左端的匹配结果  
3. 标准量词是匹配优先的  
4. 谨慎用点号，尽可能不用*号和+号  
5. 尽量使用字符串函数处理代替  
6. 合理使用括号  
7. 起始、行描点优化  
8. 拆分大的正则表达式  

## 常用正则表达式
* **正整数**: `^\d+$`
* **负整数**: `^-\d+$`
* **电话号码**: `^+?[\d\s]{3,}$`
* **电话代码**: `^+?[\d\s]+(?[\d\s]{10,}$`
* **整数**: `^-?\d+$`
* **用户名**: `^[\w\d_.]{4,16}$`
* **字母数字字符**: `^[a-zA-Z0-9]*$`
* **带空格的字母数字字符**: `^[a-zA-Z0-9 ]*$`
* **密码**: `^(?=^.{6,}$)((?=.*[A-Za-z0-9])(?=.*[A-Z])(?=.*[a-z]))^.*$`
* **电子邮件**: `^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})*$`
* **IPv4 地址**: `^((?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))*$`
* **小写字母**: `^([a-z])*$`
* **大写字母**: `^([A-Z])*$`
* **网址**: `^(((http|https|ftp):\/\/)?([[a-zA-Z0-9]\-\.])+(\.)([[a-zA-Z0-9]]){2,4}([[a-zA-Z0-9]\/+=%&_\.~?\-]*))*$`
* **VISA 信用卡号码**: `^(4[0-9]{12}(?:[0-9]{3})?)*$`
* **日期 (MM/DD/YYYY)**: `^(0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])[- /.](19|20)?[0-9]{2}$`
* **日期 (YYYY/MM/DD)**: `^(19|20)?[0-9]{2}[- /.](0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])$`
* **万事达信用卡号码**: `^(5[1-5][0-9]{14})*$`  


